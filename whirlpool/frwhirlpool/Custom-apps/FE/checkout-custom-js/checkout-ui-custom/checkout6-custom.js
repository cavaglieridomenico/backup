/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/checkout6-custom.js":
/*!*********************************!*\
  !*** ./src/checkout6-custom.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//------------------------------------------\r\n//---------LABELS TRANSLATION------\r\n//------------------------------------------\r\n\r\nconst labelTranslations = () => {\r\n  $(\"p.custom-corporate-street label\").text(\"Numéro et nom de la voie\");\r\n  $(\"p.custom-corporate-number label\").text(\r\n    \"Information complémentaire pour l’adress\"\r\n  );\r\n  $(\".vtex-front-messages-detail\").text(\"Coupon invalide\");\r\n  $(\".v-custom-ship-street\").children(\"label\").html(\"Numéro et nom de la voie\");\r\n  $(\".ship-complement\")\r\n    .children(\"label\")\r\n    .html(\"Information complémentaire pour l'adresse\");\r\n  $(\"#ship-complement\").attr(\"placeholder\", \"\");\r\n  $(\".ship-city\").children(\"label\").html(\"Ville\");\r\n  $(\".ship-state\").children(\"label\").html(\"Département\");\r\n  $(\".ship-postalCode\").children(\"label\").html(\"Code postal\");\r\n  $(\".btn-go-to-shippping-method\").html(\"Valider ma commande\");\r\n  $(\".vtex-omnishipping-1-x-shippingSectionTitle delivery-address-title\").html(\r\n    \"Complétez votre adresse\"\r\n  );\r\n  $(\"#force-shipping-fields\").html(\"Modifier\");\r\n  $(\".vtex-omnishipping-1-x-deliveryGroup\")\r\n    .children(\"p\")\r\n    .html(\"Type d’expédition\");\r\n  $(\".shp-summary-group-price\").html(\"inclus\");\r\n  $(\".vtex-omnishipping-1-x-schedule\")\r\n    .children(\"p\")\r\n    .html(\"Planifiez votre livraison\");\r\n  $(\"#scheduled-delivery-choose-Standard\").html(\r\n    \"Choisissez votre date de livraison\"\r\n  );\r\n  $(\"#btn-go-to-payment\").html(\"Valider ma commande\");\r\n  $(\".vtex-omnishipping-1-x-addressForm\")\r\n    .children(\"p\")\r\n    .html(\"Complétez votre adresse\");\r\n  $(\".shp-option-text-price\").html(\"Inclus\");\r\n  $(\".shp-option-text-label-single\").html(\"Délai classique\");\r\n};\r\n\r\nconst changeExpeditionLabel = () => {\r\n  $(\".phone-box\").remove();\r\n  $(\"input#client-phone2\").prop(\"disabled\", false);\r\n  $(\"#shipping-data\").find(\".accordion-toggle\").html(\"Livraison\");\r\n  var text1 = $(\".person-type-inputs\")\r\n    .children(\".custom-corporate-name\")\r\n    .children(\"label\");\r\n  if (text1.text() == \"Prénom e Nom de famille\") {\r\n    text1.html(\"Prénom et Nom de famille\");\r\n  }\r\n\r\n  $(\".person-type-inputs\")\r\n    .children(\".custom-corporate-document\")\r\n    .children(\"label\")\r\n    .html(\"Numéro de TVA\");\r\n  $(\".invoice-info-box\")\r\n    .children(\".person-type-field\")\r\n    .children(\"label\")\r\n    .html(\"Type d'achat\");\r\n  $(\".custom-corporate-document2\").children(\"input\").val(\".\");\r\n  var option = $(\"#user-person-type > option\");\r\n  var select = $(\"#user-person-type\");\r\n  if (\r\n    window.location.hash === \"#/profile\" ||\r\n    window.location.hash === \"#/email\"\r\n  ) {\r\n    $(\"#opt-in-invoice\").prop(\"checked\", true);\r\n    $(\"#opt-in-invoice\").attr(\"disabled\", \"disabled\");\r\n    option.each(function (index) {\r\n      if ($(this).val() == \"company\") {\r\n        $(this).html(\"Entreprise\");\r\n      } else if ($(this).val() == \"private\") {\r\n        $(this).html(\"Particulier\");\r\n      } else {\r\n        //$( this).remove()\r\n      }\r\n    });\r\n    //select.trigger(\"change\")\r\n  }\r\n  if (window.location.hash === \"#/cart\") {\r\n    $(\".empty-cart-message\")\r\n      .children(\"p\")\r\n      .html(\r\n        \"Pour continuer vos achats, parcourez les catégories sur le site ou recherchez vos produits.\"\r\n      );\r\n  }\r\n  if (window.location.hash === \"#/payment\") {\r\n    $(\".payment-group-item-text\").html(\"Carte bancaire\");\r\n  }\r\n};\r\n\r\n$(window).on(\"orderFormUpdated.vtex\", () => {\r\n  labelTranslations();\r\n  $(\".custom-corporate-state\").remove();\r\n});\r\n\r\n$(document).ready(function () {\r\n  labelTranslations();\r\n});\r\n\r\n$(window).on(\"load\", function () {\r\n  setInterval(() => changeExpeditionLabel(), 1000);\r\n});\r\n$(window).on(\"hashchange\", function () {\r\n  if (\r\n    window.location.hash === \"#/profile\" ||\r\n    window.location.hash === \"#/email\"\r\n  ) {\r\n    setTimeout(function () {\r\n      var option = $(\"#user-person-type > option\");\r\n      var select = $(\"#user-person-type\");\r\n      option.each(function () {\r\n        if ($(this).val() == \"\") {\r\n          $(this).remove();\r\n        }\r\n      });\r\n      select.trigger(\"change\");\r\n    }, 1000);\r\n  }\r\n});\r\n\r\n//---------------------------------------------//\r\n\r\n//------------------------------------------\r\n//---------INSTALLATION POPUP------\r\n//------------------------------------------\r\n\r\nconst createPopup = (skuId, checkbox) => {\r\n  $(\"body\").append(\r\n    '<div class=\"installValidationContainer\"><div class=\"installValidationFormContainer\"><div class=\"installValidationCloseIcon\"><img class=\"installValidationIcon\" src=\"/arquivos/cloing-cross.svg\"/></div><form class=\"installValidationForm\"><label class=\"installValidationLabel\" for=\"zipValidation\">Vérifier si votre code postal de livraison est couvert pour l’installation:</label><div class=\"installValidationInputContainer\"><input class=\"installValidationInput\" type=\"text\" id=\"zipValidation\" name=\"zipValidation\" placeholder=\"Enter Zip Code\"/><button class=\"installValidationButton\" type=\"submit\">Appliquer</button></div></form><div class=\"installValidationResponse\"><p class=\"installValidationResponseText\"></p></div></div></div>'\r\n  );\r\n\r\n  $(\".installValidationForm\").on(\"submit\", (event) => {\r\n    event.preventDefault();\r\n    let zipCode = $(\"#zipValidation\").val();\r\n    let regex = /^(?:[0-8]\\d|9[0-8])\\d{3}$/;\r\n    let serviceId = checkbox.val();\r\n    let itemIndex = checkbox.attr(\"data-index\");\r\n\r\n    if (!regex.test(zipCode)) {\r\n      alert(\"zip code not correct\");\r\n      return;\r\n    }\r\n    fetch(\r\n      \"/_v/wrapper/api/catalog/service/installation?skuId=\" +\r\n      skuId +\r\n      \"&zip=\" +\r\n      zipCode\r\n    )\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        } else {\r\n          return new Promise((resolve) => resolve({ data: \"KO\" }));\r\n        }\r\n      })\r\n      .then((res) => {\r\n        if (res.data.toLowerCase() == \"ok\") {\r\n          $(\".installValidationResponseText\").html(\r\n            \"<img class='tick-icon-install' src='/arquivos/check-solid.svg'/> L’installation est possible dans votre département\"\r\n          );\r\n          if (!$(\"#\" + checkbox.attr(\"id\")).is(\":checked\")) {\r\n            vtexjs.checkout.addOffering(serviceId, itemIndex);\r\n          }\r\n        } else {\r\n          $(\".installValidationResponseText\").html(\r\n            \"<img class='tick-icon-install' src='/arquivos/times-solid.svg'/> L’installation n’est pas disponible dans votre département\"\r\n          );\r\n          vtexjs.checkout.removeOffering(serviceId, itemIndex);\r\n        }\r\n      });\r\n  });\r\n};\r\n\r\n$(document).on(\"change\", \".extra-services-input\", function (e) {\r\n  if (\r\n    $(this).parent().text().trim().startsWith(\"Installation\") &&\r\n    $(this).is(\":checked\")\r\n  ) {\r\n    e.preventDefault();\r\n    const serviceId = $(this).val();\r\n    const itemIndex = $(this).attr(\"data-index\");\r\n\r\n    const checkbox = $(this);\r\n    let skuId = $(this)\r\n      .parentsUntil(\".cart-items\", \".product-item\")\r\n      .attr(\"data-sku\");\r\n    fetch(\"/_v/wrapper/api/catalog_system/sku/stockkeepingunitbyid/\" + skuId)\r\n      .then((response) => response.json())\r\n      .then((product) => {\r\n        let constructionType = product.ProductSpecifications.find(\r\n          (spec) => spec.FieldName === \"TYPE D'INSTALLATION:\"\r\n        );\r\n        if (constructionType.FieldValues[0] !== \"Pose libre\") {\r\n          createPopup(skuId, checkbox);\r\n          vtexjs.checkout.removeOffering(serviceId, itemIndex);\r\n        } else {\r\n          console.log(\"Free standing\");\r\n        }\r\n      })\r\n      .catch((err) => console.error(err));\r\n  }\r\n});\r\n\r\n$(document).on(\"click\", \".installValidationCloseIcon\", function () {\r\n  $(\".installValidationContainer\").remove();\r\n});\r\n//---------------------------------------------//\r\n$(window).on(\"load\", function () {\r\n  setInterval(\r\n    () => $(\".vtex-front-messages-detail\").text(\"Coupon invalide\"),\r\n    250\r\n  );\r\n});\r\n\r\n//------------------------------------------\r\n//------------ ONE TRUST -------------------\r\n//------------------------------------------\r\n$(document).ready(function () {\r\n  var script = document.createElement(\"script\");\r\n  script.src = \"https://cdn.cookielaw.org/scripttemplates/otSDKStub.js\";\r\n  script.setAttribute(\"charset\", \"UTF-8\");\r\n  script.setAttribute(\r\n    \"data-domain-script\",\r\n    \"9ecf3343-9eb6-4fb5-b71f-ce2228f960dc-test\"\r\n  );\r\n  script.type = \"text/javascript\";\r\n  document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n});\r\n\r\n//------------------------------------------\r\n//------------ INVOICE ADDRESS -------------\r\n//------------------------------------------\r\nfunction setInvoiceDataConfig(invoiceDataConfig) {\r\n  invoiceDataConfig.locale = \"fr\";\r\n  invoiceDataConfig.invoiceDataMandatory = true;\r\n  invoiceDataConfig.showSDIPECSelector = false;\r\n  invoiceDataConfig.defaultSDIPEC = \"pec\";\r\n  invoiceDataConfig.showPersonTypeSelector = false;\r\n  invoiceDataConfig.defaultPersonType = \"private\";\r\n  invoiceDataConfig.showTermsConditions = true;\r\n}\r\n\r\n//------------------------------------------\r\n//--------------- NEWSLETTER ---------------\r\n//------------------------------------------\r\n$(document).ready(function () {\r\n  optinGranted();\r\n  if (\r\n    window.location.hash === \"#/profile\" ||\r\n    window.location.hash === \"#/email\"\r\n  ) {\r\n    // CHANGE NEWSLETTER CHECKBOX\r\n    changeNewsletterChk();\r\n    hideDiscountTooltip();\r\n    // $(\"fieldset#requestInvoice\").hide();\r\n  }\r\n});\r\n\r\n$(window).on(\"hashchange\", function () {\r\n  if (\r\n    window.location.hash === \"#/profile\" ||\r\n    window.location.hash === \"#/email\"\r\n  ) {\r\n    // CHANGE NEWSLETTER CHECKBOX\r\n    changeNewsletterChk();\r\n    // $(\"fieldset#requestInvoice\").hide();\r\n  }\r\n});\r\n\r\nfunction changeNewsletterChk() {\r\n  if (\r\n    vtexjs.checkout.orderForm !== undefined &&\r\n    vtexjs.checkout.orderForm.loggedIn\r\n  ) {\r\n  } else {\r\n    $(\".newsletter\").html(\r\n      '<p class=\"informativa\" style=\"font-size: 13px;margin: .5rem 0;\">J\\'ai pris connaissance et j\\'accepte la <a href=\"/pages/politique-de-protection-des-donnees-a-caractere-personnel\" target=\"_blanck\">politique de protection des données à caractère personnel </a> et:</p><label class=\"checkbox newsletter-label\" data-bind=\"fadeVisible: checkout.canEditData\"><input type=\"checkbox\" id=\"opt-in-newsletter\" data-bind=\"checked: checkout.optinNewsLetter, enable: checkout.saveData\"><span class=\"newsletter-text\" data-i18n=\"global.optinNewsLetter\"> J\\'accepte de recevoir des communications personnalisées sur les offres et promotions du Groupe Whirlpool et de ses marques</span></label>' +\r\n      '<label class=\"checkbox newsletter-label\" data-bind=\"fadeVisible: checkout.canEditData\"><input required type=\"checkbox\" id=\"check-18\" data-bind=\"checked: checkout.check18, enable: checkout.saveData\"><span class=\"newsletter-text\" data-i18n=\"global.check18\"> J\\'ai plus de 18 ans* </span></label>'\r\n    );\r\n  }\r\n}\r\nconst hideDiscountTooltip = () => {\r\n  $(\"a.discount[data-bind='visible: showDiscountButton']\").hide();\r\n};\r\n\r\n//------------------------------------------\r\n//------------ SIDE CART LABELS ------------\r\n//------------------------------------------\r\n\r\n$(window).on(\"load\", function () {\r\n  setInterval(() => changeCartLabels(), 1000);\r\n});\r\n\r\nconst changeCartLabels = () => {\r\n  $(\r\n    \"tr.Discounts[data-bind='visible: visible, attr: { 'class': id }'] > td.info\"\r\n  ).text(\"Remises\");\r\n  $(\"a[data-i18n='cart.finalize']\").text(\"Valider ma commande\");\r\n  $(\".srp-summary-result\").addClass(\"Shipping\");\r\n  $('strong[data-bind=\"text: priceLabel\"]').each(function (index) {\r\n    if ($(this).text() == \"Gratuit\") {\r\n      $(this).text(\"Inclus\");\r\n    }\r\n  });\r\n  $('span[data-bind=\"text: name\"]').each(function (index) {\r\n    if ($(this).text() == \"5 ans de garantie sur votre appareil\") {\r\n      $(this).text(\r\n        \"3 ans de garantie complémentaire. La garantie passe à 5 ans\"\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\n$(window).on(\"hashchange\", function () {\r\n  if (\r\n    window.location.hash === \"#/shipping\" ||\r\n    window.location.hash === \"#/payment\"\r\n  ) {\r\n    changeCartLabels();\r\n  }\r\n});\r\n\r\n//---------------------------------------\r\n//----------- TOOTLTIP CUSTOM-------------\r\n//--------------------------------------------\r\n\r\nconst warrantyTitleTooltipText = \"Tooltip text\";\r\n\r\n$(\"body\").on(\"click\", \".icon-question-sign\", function () {\r\n  var element = $(this);\r\n  var target = element.data(\"tooltip\");\r\n  $(`#${target}`).show();\r\n  $(\"body\").css(\"overflow\", \"hidden\");\r\n});\r\n\r\n$(\"body\").on(\"click\", \"#tooltipModalClose\", function () {\r\n  var element = $(this);\r\n  element.parents(\".tooltipModal\").hide();\r\n  $(\"body\").css(\"overflow\", \"auto\");\r\n});\r\n\r\n$(window).on(\"load\", function () {\r\n  var isTooltipTextChanged = false;\r\n  if (window.location.hash === \"#/cart\") {\r\n    setInterval(function () {\r\n      if (!isTooltipTextChanged) {\r\n        $(\".title-custom-extra-services-tooltiptext\").text(\r\n          warrantyTitleTooltipText\r\n        );\r\n        $(\".title-custom-extra-services-modaltext\").text(\r\n          warrantyTitleTooltipText\r\n        );\r\n        isTooltipTextChanged = true;\r\n      }\r\n    }, 250);\r\n  }\r\n});\r\n\r\n$(document).on(\"change\", \".extra-services-checkbox\", function () {\r\n  var hasTextChanged = true;\r\n  setInterval(function () {\r\n    if (hasTextChanged) {\r\n      $(\".title-custom-extra-services-tooltiptext\").text(\r\n        warrantyTitleTooltipText\r\n      );\r\n      $(\".title-custom-extra-services-modaltext\").text(\r\n        warrantyTitleTooltipText\r\n      );\r\n    }\r\n  }, 250);\r\n});\r\n\r\n$(window).on(\"hashchange\", function () {\r\n  var hasTextChanged = true;\r\n  if (window.location.hash === \"#/cart\") {\r\n    setInterval(function () {\r\n      if (hasTextChanged) {\r\n        $(\".title-custom-extra-services-tooltiptext\").text(\r\n          warrantyTitleTooltipText\r\n        );\r\n        $(\".title-custom-extra-services-modaltext\").text(\r\n          warrantyTitleTooltipText\r\n        );\r\n      }\r\n    }, 250);\r\n  }\r\n});\r\n\r\n//------------------------------------------\r\n//------------ GOOGLE ANALYTICS ------------\r\n//------------------------------------------\r\nconst options = {\r\n  method: \"GET\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    Accept: \"application/json\",\r\n  },\r\n};\r\n\r\nfunction getSpecificationFromProduct(productId) {\r\n  return fetch(\r\n    \"/_v/wrapper/api/catalog_system/products/\" + productId + \"/specification\",\r\n    options\r\n  )\r\n    .then((response) => response.json())\r\n    .catch((err) => console.error(err));\r\n}\r\nfunction getValuefromSpecifications(specifications, name) {\r\n  const result = specifications.filter((s) => s.Name === name);\r\n  if (result.length === 0) {\r\n    return \"\";\r\n  } else {\r\n    return specifications.filter((s) => s.Name === name)[0].Value[0];\r\n  }\r\n}\r\nfunction getStringCategoryFromId(categoryId) {\r\n  return fetch(\"/_v/wrapper/api/catalog/category/\" + categoryId, options).then(\r\n    (response) => response.json()\r\n  );\r\n}\r\nfunction remove12ncName(name, code) {\r\n  if (name.indexOf(code) !== -1) {\r\n    return name.replace(code, \"\").trim();\r\n  } else {\r\n    return name;\r\n  }\r\n}\r\nfunction pushEventCheckout(stepID) {\r\n  vtexjs.checkout.getOrderForm().then(function (orderForm) {\r\n    var items = orderForm.items;\r\n    products = [];\r\n    var forEachAsync = new Promise((resolve, reject) => {\r\n      items.forEach((value, index, array) => {\r\n        var categoryIdsSplitted = value.productCategoryIds.split(\"/\");\r\n        Promise.all([\r\n          getSpecificationFromProduct(value.id),\r\n          getStringCategoryFromId(\r\n            categoryIdsSplitted[categoryIdsSplitted.length - 2]\r\n          ),\r\n        ]).then((values) => {\r\n          let dim4value = getValuefromSpecifications(\r\n            values[0],\r\n            \"constructionType\"\r\n          );\r\n          var obj = {\r\n            name: remove12ncName(value.name, value.refId),\r\n            id: value.refId,\r\n            price: value.isGift ? 0 : value.sellingPrice / 100,\r\n            brand: value.additionalInfo.brandName,\r\n            category: values[1].AdWordsRemarketingCode,\r\n            variant: getValuefromSpecifications(values[0], \"Couleur\"),\r\n            quantity: value.quantity,\r\n            dimension4:\r\n              dim4value === \"Built In\" || dim4value === \"BuiltIn\"\r\n                ? \"Built-In\"\r\n                : dim4value,\r\n            dimension5:\r\n              getValuefromSpecifications(values[0], \"sellable\") === \"true\"\r\n                ? \"Sellable Online\"\r\n                : \"Not Sellable Online\",\r\n            dimension6: findDimension(values[0], \"Offres\"),\r\n          };\r\n          products.push(obj);\r\n          if (index === array.length - 1) {\r\n            resolve();\r\n          }\r\n        });\r\n      });\r\n    });\r\n    forEachAsync.then(() => {\r\n      $(\"body\").removeClass(\"checkoutEventPush\");\r\n      if (stepID === 1) {\r\n        window.dataLayer.push({\r\n          event: \"eec.checkout\",\r\n          ecommerce: {\r\n            checkout: {\r\n              actionField: {\r\n                step: stepID,\r\n              },\r\n              products: products,\r\n            },\r\n          },\r\n        });\r\n      } else {\r\n        window.dataLayer.push({ ecommerce: null });\r\n        window.dataLayer.push({\r\n          event: \"eec.checkout\",\r\n          ecommerce: {\r\n            checkout: {\r\n              actionField: { step: stepID },\r\n            },\r\n          },\r\n        });\r\n      }\r\n    });\r\n  });\r\n}\r\nfunction getCheckoutStep() {\r\n  let hash = window.location.hash;\r\n  switch (hash) {\r\n    case \"#/cart\":\r\n      return 0;\r\n    case \"#/shipping\":\r\n      return 2;\r\n    case \"#/payment\":\r\n      return 3;\r\n    default:\r\n      return 1;\r\n  }\r\n}\r\nfunction optinGranted() {\r\n  $(document).on(\"click\", \"#opt-in-newsletter\", function () {\r\n    if (document.getElementById(\"opt-in-newsletter\").checked) {\r\n      let dL = window.dataLayer || [];\r\n      dL.push({\r\n        event: \"optin_granted\",\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n$(window).on(\"hashchange\", function () {\r\n  setTimeout(function () {\r\n    let step = getCheckoutStep();\r\n    if (step == 0) {\r\n      return;\r\n    }\r\n    let isLoading = $(\"body\").hasClass(\"checkoutEventPush\");\r\n    if (window.dataLayer && !isLoading) {\r\n      $(\"body\").addClass(\"checkoutEventPush\");\r\n      pushEventCheckout(step);\r\n    }\r\n  }, 1500);\r\n});\r\n\r\n$(document).ready(function () {\r\n  setTimeout(function () {\r\n    let step = getCheckoutStep();\r\n    if (step == 0) {\r\n      return;\r\n    }\r\n    let isLoading = $(\"body\").hasClass(\"checkoutEventPush\");\r\n    if (window.dataLayer && !isLoading) {\r\n      $(\"body\").addClass(\"checkoutEventPush\");\r\n      pushEventCheckout(step);\r\n    }\r\n  }, 1500);\r\n});\r\n\r\n// Hardcoded translations\r\n\r\n// DEEE\r\n\r\n$(window).on(\"orderFormUpdated.vtex\", () => {\r\n  getTotalDeee();\r\n});\r\n\r\nconst getTotalDeee = async () => {\r\n  let priceElement = $(\"td.monetary[data-bind='text: totalLabel']\");\r\n  let priceTemplate = \"\";\r\n  let ecofeeElement = \"\";\r\n  let orderFormItems = vtexjs.checkout.orderForm.items;\r\n  let sum = 0;\r\n  let result = orderFormItems.map((item) => {\r\n    return getSpecificationFromProduct(item.productId).then((value) => {\r\n      let prodSpecs = value;\r\n      let ecofee = getValuefromSpecifications(prodSpecs, \"ecofee\");\r\n      return ecofee * item.quantity;\r\n    });\r\n  });\r\n  return await Promise.all(result).then((arr) => {\r\n    let sumDEEE = arr.reduce(getSum);\r\n    if (arr != undefined) {\r\n      priceTemplate = `Dont ${sumDEEE}€ de eco-part. DEEE`;\r\n    } else {\r\n      priceTemplate = `*Le prix comprend la TVA, la DEEE et les promotions`;\r\n      //   console.error(\"Ecofee total is undefined\");\r\n    }\r\n    ecofeeElement = `<span class=\"totalEcofee\"> ${priceTemplate} </span>`;\r\n    priceElement.append(ecofeeElement);\r\n  });\r\n};\r\n\r\nfunction getSum(total, num) {\r\n  return total + Math.round(num);\r\n}\r\nconst checkServicesPrice = () => {\r\n  $(`.extra-services-price`).each((index, element) => {\r\n    if (element.textContent != \"Inclus\") {\r\n      $(`.extra-services-price:eq(${index})`).addClass(\"servicePriceBlack\");\r\n    }\r\n  });\r\n};\r\nfunction addStyle(styleString) {\r\n  const style = document.createElement(\"style\");\r\n  style.textContent = styleString;\r\n  document.head.append(style);\r\n\r\n  // JQUERY MANIPULATION\r\n}\r\n$(window).on(\"load\", function () {\r\n  hideDiscountTooltip();\r\n  $(\"input#cart-coupon\").prop(\"placeholder\", \"Ajoutez votre code promotionnel\");\r\n  $(\"button#cart-coupon-add\").text(\"Appliquer\");\r\n  checkServicesPrice();\r\n});\r\nsetInterval(() => {\r\n  $(\"input#cart-coupon\").prop(\"placeholder\", \"Ajoutez votre code promotionnel\");\r\n  $(\"button#cart-coupon-add\").text(\"Appliquer\");\r\n  checkServicesPrice();\r\n}, 1000);\r\n\r\n//ADD AND REMOVE FROM CART EVENTS\r\n$(document).on(\"click\", \".item-quantity-change-decrement\", function () {\r\n  let splitted = $(this).attr(\"id\").split(\"-\");\r\n  let itemId = splitted[splitted.length - 1];\r\n  let item = findItem(itemId, vtexjs.checkout.orderForm.items);\r\n  let dataQ = $('[data-sku=\"' + itemId + '\"] .quantity input').val();\r\n  if (item.quantity !== parseInt(dataQ)) {\r\n    pushRemoveToCart(item, 1);\r\n    pushCartState(item, 1, \"remove\", vtexjs.checkout.orderForm.items);\r\n  }\r\n});\r\n\r\n$(document).on(\"click\", \".item-quantity-change-increment\", function () {\r\n  let splitted = $(this).attr(\"id\").split(\"-\");\r\n  let itemId = splitted[splitted.length - 1];\r\n  let item = findItem(itemId, vtexjs.checkout.orderForm.items);\r\n  pushAddToCart(item, 1);\r\n  pushCartState(item, 1, \"add\", vtexjs.checkout.orderForm.items);\r\n});\r\n\r\n$(document).on(\"click\", \".item-link-remove\", function () {\r\n  let splitted = $(this).attr(\"id\").split(\"-\");\r\n  let itemId = splitted[splitted.length - 1];\r\n  let item = findItem(itemId, vtexjs.checkout.orderForm.items);\r\n  pushRemoveToCart(item, item.quantity);\r\n  pushCartState(item, item.quantity, \"remove\", vtexjs.checkout.orderForm.items);\r\n});\r\n\r\n$(document).on(\"blur\", \".quantity input\", function () {\r\n  let splitted = $(this).attr(\"id\").split(\"-\");\r\n  let itemId = splitted[splitted.length - 1];\r\n  let item = findItem(itemId, vtexjs.checkout.orderForm.items);\r\n  let dataQ = $(this).val();\r\n  if (item.quantity == dataQ) {\r\n    return;\r\n  } else if (item.quantity > dataQ) {\r\n    pushRemoveToCart(item, item.quantity - dataQ);\r\n    pushCartState(\r\n      item,\r\n      item.quantity - dataQ,\r\n      \"remove\",\r\n      vtexjs.checkout.orderForm.items\r\n    );\r\n  } else {\r\n    pushAddToCart(item, dataQ - item.quantity);\r\n    pushCartState(\r\n      item,\r\n      dataQ - item.quantity,\r\n      \"add\",\r\n      vtexjs.checkout.orderForm.items\r\n    );\r\n  }\r\n});\r\n\r\nfunction setPriceFormat(price) {\r\n  let newPrice = parseInt(price) / 100 + \"\";\r\n  if (newPrice.indexOf(\".\") == -1) {\r\n    return parseInt(newPrice).toFixed(2);\r\n  } else {\r\n    let arrayPrice = newPrice.split(\".\");\r\n    return parseInt(arrayPrice[1]) < 10 ? newPrice + \"0\" : newPrice;\r\n  }\r\n}\r\nfunction findItem(id, items) {\r\n  for (let i = 0; i < items.length; i++) {\r\n    if (items[i].id == id) {\r\n      return items[i];\r\n    }\r\n  }\r\n  return null;\r\n}\r\nfunction findVariant(data) {\r\n  const result = data.filter((o) => o.Name == \"Couleur\");\r\n  return result.length > 0 ? result[0].Value[0] : \"\";\r\n}\r\nfunction findDimension(data, nameKey) {\r\n  if (nameKey === \"Offres\") {\r\n    let result = data.filter((obj) => obj.Name == nameKey);\r\n    result.length > 0 ? (result = result[0]) : null;\r\n    if (result === undefined || result.Value === undefined)\r\n      return \"Not in Promo\";\r\n    if (result.Value.length > 0 && result.Value.includes(\"Offres spéciales\"))\r\n      return \"In Promo\";\r\n    else return \"Not in Promo\";\r\n  }\r\n  let result = data.filter((obj) => obj.Name == nameKey);\r\n  return result[0].Value[0];\r\n}\r\nfunction costructionType(cType) {\r\n  if (cType.indexOf(\"Free \") !== -1) {\r\n    let cTypeArray = cType.split(\" \");\r\n    return cTypeArray[0] + cTypeArray[1].toLowerCase();\r\n  } else {\r\n    return cType.replace(\" \", \"-\");\r\n  }\r\n}\r\nfunction pushAddToCart(item, dataQ) {\r\n  let categoryId = Object.keys(item.productCategories)[\r\n    Object.keys(item.productCategories).length - 1\r\n  ];\r\n  Promise.all([\r\n    getSpecificationFromProduct(item.id),\r\n    getStringCategoryFromId(categoryId),\r\n  ]).then((values) => {\r\n    window.dataLayer.push({\r\n      ecommerce: {\r\n        add: {\r\n          actionField: {\r\n            action: \"add\",\r\n          },\r\n          products: [\r\n            {\r\n              brand: item.additionalInfo.brandName,\r\n              category: values[1].AdWordsRemarketingCode,\r\n              id: item.refId,\r\n              name: item.name,\r\n              price:\r\n                `${item.price}` == \"0\" ? \"\" : setPriceFormat(`${item.price}`),\r\n              quantity: dataQ,\r\n              variant: findVariant(values[0]),\r\n              dimension4:\r\n                findDimension(values[0], \"sellable\") == \"true\"\r\n                  ? \"Sellable Online\"\r\n                  : \"Not Sellable Online\",\r\n              dimension5: costructionType(\r\n                findDimension(values[0], \"constructionType\")\r\n              ),\r\n            },\r\n          ],\r\n        },\r\n        currencyCode: \"EUR\",\r\n      },\r\n      event: \"eec.addToCart\",\r\n    });\r\n  });\r\n}\r\nfunction pushRemoveToCart(item, dataQ) {\r\n  let categoryId = Object.keys(item.productCategories)[\r\n    Object.keys(item.productCategories).length - 1\r\n  ];\r\n  Promise.all([\r\n    getSpecificationFromProduct(item.id),\r\n    getStringCategoryFromId(categoryId),\r\n  ]).then((values) => {\r\n    window.dataLayer.push({\r\n      ecommerce: {\r\n        currencyCode: \"EUR\",\r\n        remove: {\r\n          actionField: {\r\n            action: \"remove\",\r\n          },\r\n          products: [\r\n            {\r\n              brand: item.additionalInfo.brandName,\r\n              category: values[1].AdWordsRemarketingCode,\r\n              id: item.refId,\r\n              name: item.name,\r\n              price:\r\n                `${item.price}` == \"0\" ? \"\" : setPriceFormat(`${item.price}`),\r\n              quantity: dataQ,\r\n              variant: findVariant(values[0]),\r\n              dimension4:\r\n                findDimension(values[0], \"sellable\") == \"true\"\r\n                  ? \"Sellable Online\"\r\n                  : \"Not Sellable Online\",\r\n              dimension5: costructionType(\r\n                findDimension(values[0], \"constructionType\")\r\n              ),\r\n            },\r\n          ],\r\n        },\r\n      },\r\n      event: \"eec.removeFromCart\",\r\n    });\r\n  });\r\n}\r\nfunction getItemsForCart(itemId, quantity, operation, items) {\r\n  products = [];\r\n  items.forEach((item) => {\r\n    let obj = {};\r\n    if (item.refId == itemId) {\r\n      if (operation == \"remove\" && item.quantity - quantity == 0) {\r\n        return;\r\n      }\r\n      obj = {\r\n        id: item.refId,\r\n        price:\r\n          `${item.price}` == \"0\" ? \"\" : setPriceFormat(`${item.sellingPrice}`),\r\n        quantity:\r\n          operation == \"remove\"\r\n            ? item.quantity - quantity\r\n            : item.quantity + quantity,\r\n      };\r\n    } else {\r\n      obj = {\r\n        id: item.refId,\r\n        price:\r\n          `${item.price}` == \"0\" ? \"\" : setPriceFormat(`${item.sellingPrice}`),\r\n        quantity: item.quantity,\r\n      };\r\n    }\r\n    products.push(obj);\r\n  });\r\n  return products;\r\n}\r\nfunction pushCartState(itemChange, quantityChange, operation, items) {\r\n  window.dataLayer.push({\r\n    event: \"cartState\",\r\n    products: getItemsForCart(\r\n      itemChange.refId,\r\n      quantityChange,\r\n      operation,\r\n      items\r\n    ),\r\n  });\r\n}\r\n\r\n//------------------------------------------\r\n//---------NEW_RELIC_INTEGRATION------------\r\n//------------------------------------------\r\n\r\n$(document).on(\"ready\", function () {\r\n  let script = document.createElement(\"script\");\r\n  script.src = \"/arquivos/new_relic.js\";\r\n  script.type = \"text/javascript\";\r\n  document.head.appendChild(script);\r\n});\r\n\n\n//# sourceURL=webpack:///./src/checkout6-custom.js?");

/***/ }),

/***/ "./src/checkout6-custom.scss":
/*!***********************************!*\
  !*** ./src/checkout6-custom.scss ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"checkout6-custom.css\";\n\n//# sourceURL=webpack:///./src/checkout6-custom.scss?");

/***/ }),

/***/ 0:
/*!*******************************************************************!*\
  !*** multi ./src/checkout6-custom.js ./src/checkout6-custom.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! ./src/checkout6-custom.js */\"./src/checkout6-custom.js\");\nmodule.exports = __webpack_require__(/*! ./src/checkout6-custom.scss */\"./src/checkout6-custom.scss\");\n\n\n//# sourceURL=webpack:///multi_./src/checkout6-custom.js_./src/checkout6-custom.scss?");

/***/ })

/******/ });