/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/checkout6-custom.js":
/*!*********************************!*\
  !*** ./src/checkout6-custom.js ***!
  \*********************************/
/*! exports provided: postFarayeReserveSlot, getExpiredDelivery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"postFarayeReserveSlot\", function() { return postFarayeReserveSlot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getExpiredDelivery\", function() { return getExpiredDelivery; });\n//Define customjs object\r\nif (window.customjs == undefined) {\r\n  window.customjs = {\r\n    fareye: {\r\n      postalCode: \"\",\r\n      itemsCount: 0,\r\n      slots: null,\r\n      processing: false,\r\n    },\r\n    shippingPolicies: {\r\n      SCHEDULED: \"Programmata\",\r\n      STANDARD: \"Standard\",\r\n    },\r\n  };\r\n}\r\nvar hideAgenda = false;\r\n\r\nvar timeOut;\r\n$(document).ready(function () {\r\n  // goToShippingEventMap();\r\n});\r\n$(window).on(\"hashchange\", function () {\r\n  if (window.location.hash == \"#/payment\") {\r\n    timeOut = setTimeout(getExpiredDelivery, 3500);\r\n  }\r\n  if (window.location.hash !== \"#/payment\" && timeOut) {\r\n    clearTimeout(timeOut);\r\n  }\r\n});\r\n\r\n$(window).on(\"load\", function () {\r\n  if (window.location.hash == \"#/payment\") {\r\n    timeOut = setTimeout(getExpiredDelivery, 3000);\r\n  }\r\n  if (window.location.hash !== \"#/payment\" && timeOut) {\r\n    clearTimeout(timeOut);\r\n  }\r\n});\r\n$(window).on(\"orderFormUpdated.vtex\", function () {\r\n  checkScheduledDelivery();\r\n  var sPostalCode = getPostalCode();\r\n  if (window.location.hash !== \"#/cart\") {\r\n    //verify if the postal code or item count have changed\r\n    var iItemsCount = getItemsCount();\r\n    if (\r\n      sPostalCode != null &&\r\n      (customjs.fareye.postalCode != sPostalCode ||\r\n        customjs.fareye.itemsCount != iItemsCount)\r\n    ) {\r\n      customjs.fareye.postalCode = sPostalCode;\r\n      customjs.fareye.itemsCount = iItemsCount;\r\n      getFarayeSlot();\r\n    }\r\n    if (window.location.hash == \"#/shipping\") {\r\n      manageCalendarVisibility();\r\n      if (!customjs.fareye.processing) {\r\n        selectRandomSlot();\r\n      }\r\n      // if ((sPostalCode != null) && (hideAgenda) && (customjs.fareye.processing)){\r\n      //   selectRandomSlot();\r\n      // }\r\n    }\r\n  }\r\n});\r\n\r\nfunction selectRandomSlot() {\r\n  var fareyeSlots = customjs.fareye.slots ? customjs.fareye.slots.slots : [];\r\n  if (fareyeSlots.length == 0 || fareyeSlots == null) {\r\n    if (\r\n      window._ScheduledDeliveryComponent &&\r\n      window._ScheduledDeliveryComponent.props &&\r\n      window._ScheduledDeliveryComponent.props\r\n        .scheduledDeliveryItemsBySeller[0] &&\r\n      window._ScheduledDeliveryComponent.props.scheduledDeliveryItemsBySeller[0]\r\n        .slas[0] &&\r\n      window._ScheduledDeliveryComponent.props.scheduledDeliveryItemsBySeller[0]\r\n        .slas[0].deliveryWindow == null\r\n    ) {\r\n      vtexjs.checkout.sendAttachment(\"shippingData\", {\r\n        selectedAddresses:\r\n          vtexjs.checkout.orderForm.shippingData.selectedAddresses,\r\n        logisticsInfo: vtexjs.checkout.orderForm.shippingData.logisticsInfo.map(\r\n          (li) => ({\r\n            addressId: li.addressId,\r\n            deliveryWindow: li.slas.find((sla) => sla.id == li.selectedSla)\r\n              .availableDeliveryWindows[0],\r\n            itemIndex: li.itemIndex,\r\n            selectedDeliveryChannel: li.selectedDeliveryChannel,\r\n            selectedSla: li.selectedSla,\r\n          })\r\n        ),\r\n      });\r\n    }\r\n  }\r\n}\r\nfunction hideRandomScheduled() {\r\n  var fareyeSlots = customjs.fareye.slots ? customjs.fareye.slots.slots : [];\r\n  if (fareyeSlots.length == 0 || fareyeSlots == null) {\r\n    var scheduled = document.getElementsByClassName(\"shp-summary-scheduled\")[0];\r\n    var details = document.getElementsByClassName(\r\n      \"shp-summary-group vtex-omnishipping-1-x-SummaryItemGroup\"\r\n    )[0];\r\n    if (scheduled) {\r\n      scheduled.remove();\r\n      //addFareyeErrorMessage(details)\r\n    }\r\n  } else {\r\n    // const errorMessage = document.getElementById(\"contentFareyeErrorMessage\");\r\n    // if (errorMessage) errorMessage.remove();\r\n  }\r\n}\r\nfunction goToShippingEventMap() {\r\n  if ($(\"body\").attr(\"FarEye_eventMap\") != \"1\") {\r\n    $(\"body\").on(\"click\", \"#btn-go-to-shippping-method\", function () {\r\n      if ($(\"#ship-postalCode\").val() !== \"\") {\r\n        if (customjs.fareye.postalCode !== $(\"#ship-postalCode\").val()) {\r\n          // customjs.fareye.postalCode = $(\"#ship-postalCode\").val();\r\n          getFarayeSlot();\r\n          //loadFarEyeSlots(customjs.fareye.postalCode, getItemsCount())\r\n        }\r\n      }\r\n    });\r\n\r\n    $(\"body\").on(\"blur\", \"#v-custom-ship-street\", function () {\r\n      //console.log(\"******** #v-custom-ship-street\");\r\n      setTimeout(function () {\r\n        if ($(\"#ship-postalCode\").val() !== \"\") {\r\n          if (customjs.fareye.postalCode !== $(\"#ship-postalCode\").val()) {\r\n            // customjs.fareye.postalCode = $(\"#ship-postalCode\").val();\r\n            getFarayeSlot();\r\n            //loadFarEyeSlots(customjs.fareye.postalCode, getItemsCount());\r\n          }\r\n        }\r\n      }, 500);\r\n    });\r\n    $(\"body\").attr(\"FarEye_eventMap\", \"1\");\r\n  }\r\n}\r\nfunction goToPayment() {\r\n  if (window.location.hash == \"#/shipping\") {\r\n    var goToPaymentFromShippingSection =\r\n      document.getElementById(\"btn-go-to-payment\");\r\n    var goToPaymentFromProfileSection =\r\n      document.getElementById(\"go-to-payment\");\r\n    var editPaymentButton =\r\n      document.getElementsByClassName(\"payment-edit-link\").length > 0 &&\r\n      document\r\n        .getElementsByClassName(\"payment-edit-link\")[0]\r\n        .getElementsByClassName(\"link-box-edit\").length > 0\r\n        ? document\r\n            .getElementsByClassName(\"payment-edit-link\")[0]\r\n            .getElementsByClassName(\"link-box-edit\")[0]\r\n        : undefined;\r\n    if (\r\n      goToPaymentFromShippingSection &&\r\n      goToPaymentFromProfileSection &&\r\n      editPaymentButton\r\n    ) {\r\n      goToPaymentFromShippingSection.onclick = handleGoToPaymentClick;\r\n      goToPaymentFromProfileSection.onclick = handleGoToPaymentClick;\r\n      editPaymentButton.onclick = handleGoToPaymentClick;\r\n    } else {\r\n      var config = {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: true,\r\n      };\r\n      // Callback function to execute when mutations are observed\r\n      var observer = new MutationObserver(function (mutationsList) {\r\n        for (var mutation of mutationsList) {\r\n          if (mutation.type == \"childList\") {\r\n            if (goToPaymentFromShippingSection)\r\n              goToPaymentFromShippingSection.onclick = handleGoToPaymentClick;\r\n            if (goToPaymentFromProfileSection)\r\n              goToPaymentFromProfileSection.onclick = handleGoToPaymentClick;\r\n            if (editPaymentButton)\r\n              editPaymentButton.onclick = handleGoToPaymentClick;\r\n          }\r\n        }\r\n      });\r\n      observer.observe(document, config);\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleGoToPaymentClick() {\r\n  if (\r\n    vtexjs.checkout.orderForm &&\r\n    vtexjs.checkout.orderForm.shippingData.logisticsInfo\r\n  ) {\r\n    if (vtexjs.checkout.orderForm.shippingData.logisticsInfo.length > 0) {\r\n      if (\r\n        vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].selectedSla ==\r\n        window.customjs.shippingPolicies.SCHEDULED\r\n      ) {\r\n        if (\r\n          vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].slas &&\r\n          vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].slas.length >\r\n            0\r\n        ) {\r\n          const scheduledSla =\r\n            vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].slas.find(\r\n              (s) => s.id === window.customjs.shippingPolicies.SCHEDULED\r\n            );\r\n          if (scheduledSla && scheduledSla.deliveryWindow) {\r\n            postFarayeReserveSlot();\r\n          } else if (\r\n            customjs.fareye.slots &&\r\n            customjs.fareye.slots.slots &&\r\n            customjs.fareye.slots.slots.length > 0\r\n          ) {\r\n            showAlert(\"Seleziona uno slot per procedere!\", \"warn\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction showAlert(alertText, type) {\r\n  $(window).trigger(\"addMessage\", {\r\n    timeout: \"5000\",\r\n    content: {\r\n      title: alertText,\r\n    },\r\n    type,\r\n  });\r\n}\r\n\r\nfunction checkScheduledDelivery() {\r\n  goToPayment();\r\n  if (window.location.hash == \"#/payment\") {\r\n    //postFarayeReserveSlot();\r\n    hideRandomScheduled();\r\n    if (\r\n      vtexjs.checkout.orderForm &&\r\n      vtexjs.checkout.orderForm.shippingData.logisticsInfo\r\n    ) {\r\n      if (vtexjs.checkout.orderForm.shippingData.logisticsInfo.length > 0) {\r\n        if (\r\n          vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].selectedSla ==\r\n          window.customjs.shippingPolicies.SCHEDULED\r\n        ) {\r\n          for (\r\n            var i = 0;\r\n            i <\r\n            vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].slas.length;\r\n            i++\r\n          ) {\r\n            var sla =\r\n              vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].slas[i];\r\n            if (sla.id == window.customjs.shippingPolicies.SCHEDULED) {\r\n              if (!sla.deliveryWindow) {\r\n                window.location.hash = \"#/shipping\";\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nasync function getFarayeSlot() {\r\n  customjs.fareye.processing = true;\r\n  const orderFormId = vtexjs.checkout.orderForm.orderFormId;\r\n  let response = await fetch(`/app/fareye/slots/retrieve/${orderFormId}`, {\r\n    method: \"GET\",\r\n    headers: {},\r\n  }).catch((err) => {\r\n    console.error(err);\r\n    return { status: -1 };\r\n  });\r\n  console.log(\"status:\", response.status);\r\n  if (response.status == 200) {\r\n    customjs.fareye.slots = await response.json();\r\n    console.log(\"SLOTS\", customjs.fareye.slots);\r\n    hideAgenda = false;\r\n    customjs.fareye.processing = false;\r\n    // fareyeSlots = customjs.fareye.slots ? customjs.fareye.slots.slots : [];\r\n    // if(customjs.fareye.slots == [] || customjs.fareye.slots.slots == []){\r\n    //   hideAgenda = false;\r\n    // }\r\n    if (customjs.fareye.triggerInitialize) {\r\n      $(window).trigger(\"ScheduledDelivery_Initialize.vtex\");\r\n      customjs.fareye.triggerInitialize = false;\r\n    }\r\n  } else if (response.status !== 200) {\r\n    customjs.fareye.processing = false;\r\n    hideAgenda = true;\r\n    // customjs.fareye.slots = [];\r\n    customjs.fareye.slots.slots = [];\r\n  }\r\n}\r\n//This function takes care of hiding the calendar and showing an error message in case of negative response coming from fareye\r\nfunction manageCalendarVisibility() {\r\n  // if (window.customjs.createdObserver) return;\r\n  var targetNode = document.getElementById(\"shipping-data\");\r\n  if (hideAgenda) {\r\n    if (targetNode) targetNode.classList.add(\"fareyeError\");\r\n    addFareyeErrorMessage(\r\n      document.getElementsByClassName(\"vtex-omnishipping-1-x-addressForm\")[0]\r\n    );\r\n    if (window.location.hash == \"#/shipping\") {\r\n      var nodeToDelete = document.getElementsByClassName(\r\n        \"vtex-omnishipping-1-x-deliveryGroup\"\r\n      )[0];\r\n      if (nodeToDelete) {\r\n        nodeToDelete.classList.add(\"hideElement\");\r\n      }\r\n    }\r\n  } else if (targetNode) {\r\n    targetNode.classList.remove(\"fareyeError\");\r\n    const errorMessage = document.getElementById(\"contentFareyeErrorMessage\");\r\n    if (errorMessage) errorMessage.remove();\r\n    if (window.location.hash == \"#/shipping\") {\r\n      var nodeToDelete = document.getElementsByClassName(\r\n        \"vtex-omnishipping-1-x-deliveryGroup\"\r\n      )[0];\r\n      if (nodeToDelete) {\r\n        nodeToDelete.classList.remove(\"hideElement\");\r\n      }\r\n    }\r\n  }\r\n  // var config = {\r\n  //   attributes: true,\r\n  //   childList: true,\r\n  //   subtree: true,\r\n  // };\r\n  // hideFareyeMessage();\r\n  // // Callback function to execute when mutations are observed\r\n  // if (targetNode && window.location.hash == \"#/shipping\" && hideAgenda) {\r\n  //   var nodeToDelete = document.getElementsByClassName(\r\n  //     \"vtex-omnishipping-1-x-deliveryGroup\"\r\n  //   )[0]; //hide\r\n  //   var nodeToAddElement = document.getElementsByClassName(\r\n  //     \"vtex-omnishipping-1-x-addressForm\"\r\n  //   )[0]; //add\r\n  //   var callback = function (mutationsList) {\r\n  //     for (var mutation of mutationsList) {\r\n  //       if (mutation.type == \"childList\") {\r\n  //         if (nodeToDelete) {\r\n  //           nodeToDelete.style.display = \"none\";\r\n  //         }\r\n  //       } else if (mutation.type == \"attributes\" && nodeToDelete) {\r\n  //       }\r\n  //     }\r\n  //   };\r\n  //   if (nodeToAddElement) {\r\n  //     addFareyeErrorMessage(nodeToAddElement);\r\n  //   }\r\n  //   var observer = new MutationObserver(callback);\r\n  //   observer.observe(targetNode, config);\r\n  //   window.customjs.createdObserver = true;\r\n  // }\r\n}\r\n//This function takes care of showing an error message in case of negative response coming from fareye\r\nfunction addFareyeErrorMessage(nodeToAddElement) {\r\n  if (!nodeToAddElement || document.getElementById(\"contentFareyeErrorMessage\"))\r\n    return;\r\n  var contentFareyeError = document.createElement(\"div\");\r\n  contentFareyeError.id = \"contentFareyeErrorMessage\";\r\n  contentFareyeError.className = \"contentFareyeErrorMessage\";\r\n  var imageFareyeError = document.createElement(\"img\");\r\n  imageFareyeError.className = \"markFareye\";\r\n  var errorFareye = document.createElement(\"p\");\r\n  errorFareye.className = \"errorFareye\";\r\n  errorFareye.innerHTML =\r\n    \"Sarai contattato dal servizio clienti per concordare una data di consegna. Procedi al pagamento per completare l'ordine\";\r\n  contentFareyeError.appendChild(imageFareyeError);\r\n  contentFareyeError.appendChild(errorFareye);\r\n  nodeToAddElement.appendChild(contentFareyeError);\r\n}\r\n//This function takes care of hiding the error message in case of positive response coming from fareye\r\n// function hideFareyeMessage() {\r\n//   if (!hideAgenda) {\r\n//     var elemToDisplay = document.getElementsByClassName(\r\n//       \"vtex-omnishipping-1-x-deliveryGroup\"\r\n//     )[0];\r\n//     var contentFareyeError = document.getElementById(\r\n//       \"contentFareyeErrorMessage\"\r\n//     );\r\n//     if (elemToDisplay) {\r\n//       elemToDisplay.style.display = \"block\";\r\n//     }\r\n//     if (contentFareyeError) {\r\n//       contentFareyeError.style.display = \"none\";\r\n//     }\r\n//   }\r\n// }\r\nconst postFarayeReserveSlot = () => {\r\n  const options = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n  const orderFormId = vtexjs.checkout.orderForm.orderFormId;\r\n  const fetchUrl = `/app/fareye/slots/reserve/${orderFormId}`;\r\n  return fetch(fetchUrl, options).then((response) => response.text());\r\n};\r\n//If the user is staying for more than two hours in the payment section this is sent back in the shipping section\r\nfunction getExpiredDelivery() {\r\n  const options = {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n  const orderFormId = vtexjs.checkout.orderForm.orderFormId;\r\n  let fetchUrl = `/app/fareye/reservation/check/${orderFormId}`;\r\n  return fetch(fetchUrl, options)\r\n    .then((response) => response.json())\r\n    .then((res) => {\r\n      if (res.redirectToShippingSection) {\r\n        window.location.hash = \"#/shipping\";\r\n      } else if (!res.reservationFound) {\r\n        getFarayeSlot().then(() => {\r\n          if (customjs.fareye.slots && customjs.fareye.slots.slots.length > 0)\r\n            window.location.hash = \"#/shipping\";\r\n        });\r\n      }\r\n    });\r\n}\r\n\r\n//Auxiliar functions\r\nfunction getPostalCode() {\r\n  if (vtexjs.checkout.orderForm.shippingData) {\r\n    if (vtexjs.checkout.orderForm.shippingData.address) {\r\n      return vtexjs.checkout.orderForm.shippingData.address.postalCode;\r\n    }\r\n  }\r\n  return null;\r\n}\r\nfunction getItemsCount() {\r\n  return vtexjs.checkout.orderForm.items.length;\r\n}\r\n//Catch ScheduledDelivery Initialize.vtex event\r\n$(window).on(\"ScheduledDelivery_Initialize.vtex\", function () {\r\n  console.log(\"ScheduledDelivery_Initialize\");\r\n  if (!window._ScheduledDeliveryComponent) {\r\n    return;\r\n  }\r\n  if (customjs.fareye.processing) {\r\n    customjs.fareye.triggerInitialize = true;\r\n  }\r\n  var data =\r\n    window._ScheduledDeliveryComponent.props.scheduledDeliveryItemsBySeller;\r\n  var _sellers = [];\r\n  //console.log(window._ScheduledDeliveryComponent.props.scheduledDeliveryItemsBySeller);\r\n  //console.log(window.customjs);\r\n  for (var i = 0; i < data.length; i++) {\r\n    var seller = data[i];\r\n    var scheduledDeliverAvailable = false;\r\n    _sellers[i] = { ssd: [] };\r\n    console.log(\"seller\", seller.selectedScheduledDeliveries);\r\n    if (seller.selectedScheduledDeliveries) {\r\n      if (seller.slas.length > 0) {\r\n        for (var j = 0; j < seller.slas.length; j++) {\r\n          var sd = seller.slas[j];\r\n          _sellers[i].ssd[j] = { availableDeliveryWindows: [] };\r\n          if (sd.id == window.customjs.shippingPolicies.SCHEDULED) {\r\n            scheduledDeliverAvailable = verifyDeliveryWindows(sd);\r\n            _sellers[i].ssd[j].availableDeliveryWindows =\r\n              sd.availableDeliveryWindows;\r\n          }\r\n        }\r\n      } else {\r\n        for (var j = 0; j < seller.selectedScheduledDeliveries.length; j++) {\r\n          var sd = seller.selectedScheduledDeliveries[j];\r\n          _sellers[i].ssd[j] = { availableDeliveryWindows: [] };\r\n          if (\r\n            sd.selectedScheduledDelivery &&\r\n            sd.selectedScheduledDelivery.id ==\r\n              window.customjs.shippingPolicies.SCHEDULED\r\n          ) {\r\n            scheduledDeliverAvailable = verifyDeliveryWindows(\r\n              sd.selectedScheduledDelivery\r\n            );\r\n            _sellers[i].ssd[j].availableDeliveryWindows =\r\n              sd.selectedScheduledDelivery.availableDeliveryWindows;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  window._ScheduledDeliveryComponent._sellerAW = _sellers;\r\n  console.log(\"****** \" + scheduledDeliverAvailable);\r\n  //console.log(window._ScheduledDeliveryComponent.props.scheduledDeliveryItemsBySeller);\r\n  var selectedSLA = \"\";\r\n  if (\r\n    vtexjs.checkout.orderForm &&\r\n    vtexjs.checkout.orderForm.shippingData.logisticsInfo\r\n  ) {\r\n    if (vtexjs.checkout.orderForm.shippingData.logisticsInfo.length > 0) {\r\n      selectedSLA =\r\n        vtexjs.checkout.orderForm.shippingData.logisticsInfo[0].selectedSla;\r\n    }\r\n  }\r\n  if (scheduledDeliverAvailable) {\r\n    jQuery(\"body\").removeClass(\"scheduled-delivery-delivery_toggle_hide\");\r\n  } else {\r\n    jQuery(\"body\").addClass(\"scheduled-delivery-delivery_toggle_hide\");\r\n  }\r\n  if (\r\n    scheduledDeliverAvailable &&\r\n    selectedSLA != window.customjs.shippingPolicies.STANDARD\r\n  ) {\r\n    window._ScheduledDeliveryComponent.props.toggleScheduledDelivery(true);\r\n    window._ScheduledDeliveryComponent.updateSLAOption(\r\n      window.customjs.shippingPolicies.SCHEDULED\r\n    );\r\n  } else {\r\n    window._ScheduledDeliveryComponent.props.toggleScheduledDelivery(false);\r\n    window._ScheduledDeliveryComponent.updateSLAOption(\r\n      window.customjs.shippingPolicies.STANDARD\r\n    );\r\n  }\r\n});\r\n//ScheduledDelivery Render EventHandler\r\nwindow.ScheduledDelivery_RenderEvent = function (data) {\r\n  //console.log(\"******************* ScheduledDelivery_RenderEvent *********************\");\r\n  if (!data) {\r\n    return;\r\n  }\r\n  for (var i = 0; i < data.length; i++) {\r\n    var seller = data[i];\r\n    // var scheduledDeliverAvailable = false;\r\n\r\n    if (seller.selectedScheduledDeliveries) {\r\n      for (var j = 0; j < seller.selectedScheduledDeliveries.length; j++) {\r\n        var sd = seller.selectedScheduledDeliveries[j];\r\n        if (\r\n          sd.selectedScheduledDelivery &&\r\n          sd.selectedScheduledDelivery.id ==\r\n            window.customjs.shippingPolicies.SCHEDULED\r\n        ) {\r\n          sd.selectedScheduledDelivery.availableDeliveryWindows =\r\n            window._ScheduledDeliveryComponent._sellerAW[i].ssd[\r\n              j\r\n            ].availableDeliveryWindows;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //console.log(data)\r\n};\r\nwindow.ScheduledDelivery_ToggleEvent = function (e) {\r\n  //console.log(e.props.isActive);\r\n  if (!e.props.isActive) {\r\n    e.updateSLAOption(window.customjs.shippingPolicies.SCHEDULED);\r\n  } else {\r\n    e.updateSLAOption(window.customjs.shippingPolicies.STANDARD);\r\n  }\r\n};\r\nfunction verifyDeliveryWindows(ssd) {\r\n  var CustomDeliveryWindows = null;\r\n  if (window.customjs != undefined) {\r\n    //customjs.fareye.slots ? customjs.fareye.slots.slots : [];\r\n    if (customjs.fareye.slots !== null) {\r\n      CustomDeliveryWindows = window.customjs.fareye.slots.slots;\r\n    }\r\n  }\r\n  if (customjs.fareye.processing) {\r\n    console.log(\"fareye: API call pending\");\r\n  }\r\n  ssd.availableDeliveryWindows = removeUnavailableDeliveryWindows(\r\n    ssd.availableDeliveryWindows,\r\n    CustomDeliveryWindows\r\n  );\r\n  notAvailableFareyeSlots(ssd.availableDeliveryWindows);\r\n\r\n  if (ssd.availableDeliveryWindows.length == 0) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n//This function finds the match between the fareye and vtex slots in order to return only those present in both fareye and vtex\r\nfunction removeUnavailableDeliveryWindows(\r\n  availableDeliveryWindows,\r\n  CustomDeliveryWindows\r\n) {\r\n  let filteredDeliveryWindows = [];\r\n  if (window.customjs.Ignore) {\r\n    return availableDeliveryWindows;\r\n  }\r\n  console.log(\"vtex :\", availableDeliveryWindows);\r\n  console.log(\"fareye :\", CustomDeliveryWindows);\r\n  //let available = availableDeliveryWindows.map(({startDateUtc, endDateUtc})=> ({startDateUtc, endDateUtc}));\r\n  if (CustomDeliveryWindows == null || checkOnlyAccessoryWithPrice()) {\r\n    return [];\r\n  }\r\n  CustomDeliveryWindows.map((elem) =>\r\n    availableDeliveryWindows.map((start) => {\r\n      if (\r\n        elem.startDateUtc.substring(0, 16) ==\r\n          start.startDateUtc.substring(0, 16) &&\r\n        elem.endDateUtc.substring(0, 16) == start.endDateUtc.substring(0, 16)\r\n      ) {\r\n        if (!filteredDeliveryWindows.includes(start)) {\r\n          filteredDeliveryWindows.push(start);\r\n        }\r\n      } else {\r\n        //console.log(\"false\");\r\n      }\r\n    })\r\n  );\r\n  console.log(\"filteredDeliveryWindows\", filteredDeliveryWindows);\r\n  return filteredDeliveryWindows;\r\n}\r\nfunction notAvailableFareyeSlots(filteredDeliveryWindows) {\r\n  hideAgenda = filteredDeliveryWindows.length == 0;\r\n  manageCalendarVisibility();\r\n  // if(hideAgenda){\r\n  //    selectRandomSlot();\r\n  // }\r\n}\r\nfunction checkOnlyAccessoryWithPrice() {\r\n  if (\r\n    vtexjs &&\r\n    vtexjs.checkout &&\r\n    vtexjs.checkout.orderForm &&\r\n    vtexjs.checkout.orderForm.items\r\n  ) {\r\n    for (var i = 0; i < vtexjs.checkout.orderForm.items.length; i++) {\r\n      var item = vtexjs.checkout.orderForm.items[i];\r\n      if (item.productCategoryIds.substring(0, 3) == \"/1/\") {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/checkout6-custom.js?");

/***/ }),

/***/ "./src/checkout6-custom.scss":
/*!***********************************!*\
  !*** ./src/checkout6-custom.scss ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"checkout6-custom.css\";\n\n//# sourceURL=webpack:///./src/checkout6-custom.scss?");

/***/ }),

/***/ 0:
/*!*******************************************************************!*\
  !*** multi ./src/checkout6-custom.js ./src/checkout6-custom.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! ./src/checkout6-custom.js */\"./src/checkout6-custom.js\");\nmodule.exports = __webpack_require__(/*! ./src/checkout6-custom.scss */\"./src/checkout6-custom.scss\");\n\n\n//# sourceURL=webpack:///multi_./src/checkout6-custom.js_./src/checkout6-custom.scss?");

/***/ })

/******/ });